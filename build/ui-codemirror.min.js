/**
 * angular-ui-codemirror - This directive allows you to add CodeMirror to your textarea elements.
 * @version v0.0.5 - 2013-10-29
 * @link http://angular-ui.github.com
 * @license MIT
 */
angular.module("ui.codemirror",[]).constant("uiCodemirrorConfig",{}).directive("uiCodemirror",["uiCodemirrorConfig",function(a){"use strict";return{restrict:"A",require:"?ngModel",compile:function(b){if(angular.isUndefined(window.CodeMirror))throw new Error("ui-codemirror need CodeMirror to work... (o rly?)");var c=b.text(),d=new CodeMirror(function(a){angular.forEach(b.prop("attributes"),function(b){"ui-codemirror"===b.name?a.setAttribute("ui-codemirror-opts",b.textContent):a.setAttribute(b.name,b.textContent)}),b.parent().length<=0&&b.wrap("<div>"),b.replaceWith(a)},{value:c});return function(b,c,e,f){function g(a){for(var b in a)a.hasOwnProperty(b)&&d.setOption(b,a[b])}var h,i;h=a.codemirror||{},i=angular.extend({},h,b.$eval(e.uiCodemirror)),g(i),angular.isDefined(b[e.uiCodemirror])&&b.$watch(e.uiCodemirror,g,!0),d.on("change",function(a,c){var d=a.getValue();f&&d!==f.$viewValue&&f.$setViewValue(d),angular.isFunction(i.onChange)&&i.onChange(a,c),b.$$phase||b.$apply()}),f&&(f.$formatters.push(function(a){if(angular.isUndefined(a)||null===a)return"";if(angular.isObject(a)||angular.isArray(a))throw new Error("ui-codemirror cannot use an object or an array as a model");return a}),f.$render=function(){d.setValue(f.$viewValue)}),e.uiRefresh&&b.$watch(e.uiRefresh,function(a,b){a!==b&&d.refresh()}),angular.isFunction(i.onLoad)&&i.onLoad(d)}}}}]);